# Object와 의존관계

## DAO

### DAO  정의

- DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 오브젝트를 말한다.

### Java Bean

- 간단히 빈이라고 하며, 두 가지 관례를 따라 만들어진 오브젝트이다.
  - 디폴트 생성자 : 디폴트 생성자는 인자는 하나도 없고, 내용도 텅 비어있는 생성자이다.(디폴트 생성자가 없으면, new 연산자로 해당 객체를 못불러온다.) 
    자바빈은 파라미터가 없는 디폴트 생성자를 갖고 있어야 한다. 툴이나 프레임워크에서 리플렉션을 통해 오브젝트를 생성하기 때문이다.
  - 프로퍼티 : 자바빈이 노출하는 이름을 가진 속성. setter, getter로 시작하는 접근자 메소드를 이용해 수정 또는 조회할 수 있다. (VO의 속성들)

## DAO의 분리

- 클라이언트가 기능 변경을 요청했을 때, 분리와 확장을 고려한 설계를 했다면 필요한 작업을 최소화할 수 있다.

### 관심사의 분리

- 관심이 같은 것끼리는 하나의 객체로 모이게 해, 서로 영향을 주지 않도록 분리하는 것.(객체 지향)
- 하지만 언젠가 뭉쳐 있는 여러 관심사를 적절하게 구분하고 따로 분리하는 작업을 해야 함.
- 관심사에 따라 효과적으로 집중할 수 있게 만들어 줘야 함.(AOP / 관점 중심 프로그래밍)

### DAO의 관심사 분리

- DB 연결을 위한 커넥션 : DB 종류, 드라이버 종류, 로그인 정보 등
- DB에 보낼 SQL 문장 및 statement 바인딩, 실행 등
- statement, connection 닫아서 리소스를 시스템에 돌려주기
- 예외사항 처리
- 중복된 코드를 독립적인 메소드로 만들어 중복을 제거 (scope 생각해서 작성할 것)

### 리펙토링과 테스트

- main을 이용해 테스트를 할 경우, 테이블의 id 중복 때문에 예외가 발생할 수 있다. : 사용자 정보 삭제

#### 리펙토링 

- 기존의 코드를 외부의 동작방식에는 변화 없이 내부 구조를 변경해서 재구성하는 작업
- 내부 설계가 개선되어 코드를 이해하기 더 편해지고 변화에 효율적으로 대처 가능
- 유지보수 용이, 견고하면서도 유연한 제품 개발 가능
- 메소드 추출 기법(중복 코드를 묶어 새로운 메소드 생성)
- [리펙토링 / 저자: 마틴 파울러, 켄트 벡 공저] 책 추천





